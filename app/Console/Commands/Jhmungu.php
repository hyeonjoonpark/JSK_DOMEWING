<?php

namespace App\Console\Commands;

use Illuminate\Console\Command;
use Illuminate\Support\Facades\DB;

class Jhmungu extends Command
{
    /**
     * The name and signature of the console command.
     *
     * @var string
     */
    protected $signature = 'app:jhmungu';

    /**
     * The console command description.
     *
     * @var string
     */
    protected $description = 'Command description';

    /**
     * Execute the console command.
     */
    public function handle()
    {
        $originProductCodes = '139476
122473
11134
91773
40985
147170
108320
61364
26418
28689
28688
28684
28683
159005
155201
90595
126227
143981
143980
85467
136036
87416
152236
30677
144128
136842
136806
968
91687
34771
86856
78072
15876
15875
59326
59325
140794
92565
41051
101557
101556
85930
145226
103637
130365
130364
116846
116845
126375
149305
146082
34335
34333
123767
89474
87858
136070
85436
41767
46722
151846
151508
118326
116634
14843
58122
152722
150949
150948
102617
134954
134953
95194
156122
156121
156120
156104
156103
156102
151542
38070
140406
124617
124612
91762
40964
137451
140647
156915
149388
75328
133400
139760
139759
102526
82896
92168
87624
155630
155629
155628
151619
133469
132926
132925
143698
143043
143042
143032
133467
158505
150640
150639
153813
136286
102659
37184
37183
106532
46615
27398
26614
88161
145917
90878
88228
8189
158538
150867
146754
28037
92726
40894
92751
41057
91670
34868
136744
69032
137527
148349
150423
122525
38557
140354
125235
144031
71492
156893
52999
75841
91953
63192
127543
127542
136865
158665
86964
158630
158627
150020
150006
143697
142018
93313
92478
37340
158607
150011
150010
118084
99297
15866
127170
101061
83666
107049
107022
1252
37312
158303
157558
148944
148929
47726
144829
144125
100540
100539
100538
146124
146117
88474
125033
139369
112252
143775
143774
15725
15713
91875
91825
82314
67371
103936
129982
149013
148466
89743
89742
104349
96573
96572
138705
84816
72289
58564
58563
130359
122419
38587
142361
105924
150657
84774
138393
137677
137599
152296
92495
92491
108790
103670
141922
107913
100658
30926
100659
6599
51477
66880
147935
155286
144647
142160
66082
149089
149088
156647
152484
684
145073
145072
66714
12930
23861
92364
3435
148097
138753
111789
111788
88220
15857
149954
93745
144197
144147
148323
148322
148251
107174
107173
142158
142157
142093
92703
41072
41071
18275
112317
112294
112194
155108
155107
158288
11056
118187
143364
132293
129694
127893
127892
137192
122436
97829
92203
85986
67422
15879
15878
153410
132081
131188
131170
132083
131189
131171
88291
88346
70652
126289
126288
77388
148548
88358
26929
136064
136060
151594
88225
15836
136063
136059
157408
157407
157406
156863
156862
61601
148720
148719
148437
143403
101146
32605
90708
90707
92780
40956
156282
145726
143235
138410
138409
108579
105334
104678
62320
62319
59810
13330
122140
109607
119323
158990
137381
92804
92800
92799
150532
138996
125550
124028
150222
32991
158840
158830
108611
99111
102513
35285
7886
19875
19851
19847
101211
158626
158625
158624
115680
158393
68518
92061
1019
155270
111719
87740
52575
52574
7007
19092
158151
92415
69447
113548
113523
88847
93711
53789
5918
97245
13901
13900
';
        $originProductCodeArr = explode("\n", trim($originProductCodes));
        $productCodes = [];
        foreach ($originProductCodeArr as $originProductCode) {
            $productCode = DB::table('minewing_products')
                ->where('productHref', 'like', '%' . $originProductCode . '%')
                ->where('sellerID', 27)
                ->first(['productCode']);
            if ($productCode !== null) {
                $productCodes[] = $productCode->productCode;
            }
        }
        $productCodeStr = implode(',', $productCodes);
        echo $productCodeStr;
    }
}
